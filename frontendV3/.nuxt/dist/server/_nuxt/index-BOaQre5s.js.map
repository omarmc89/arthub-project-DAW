{"version":3,"file":"index-BOaQre5s.js","sources":["../../../../components/ArtworkSkeleton.vue","../../../../composables/useScrollToTop.js","../../../../composables/useCreateArtwork.js","../../../../components/UserArtworksList.vue","../../../../pages/dashboard/index.vue"],"sourcesContent":["<template>\n    <section class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n      <article v-for=\"item in items\" :key=\"item.id\" class=\"flex flex-col items-center justify-center\">\n        <USkeleton class=\"h-4 w-[350px] m-4\" />\n        <USkeleton class=\"h-[350px] w-[350px] m-4\" :ui=\"{ rounded: 'rounded-xl' }\" />\n        <div class=\"flex flex-row justify-around gap-8\">\n          <USkeleton class=\"h-4 w-4\" />\n          <USkeleton class=\"h-4 w-4\" />\n        </div>\n      </article>\n    </section>\n  </template>\n\n<script setup>\nconst items = 6\n</script>","export default async function useScrollToTop () {\n        window.scrollTo(0, 0)\n}","import { useAuthStore } from '~/store/auth'\n\n\n\nexport const useCreateArtwork = async (fetchData) => {\n    const runtimeConfig = useRuntimeConfig()\n    const { sessionToken} = useAuthStore();\n\n    const { data, error, pending } = await useFetch(runtimeConfig.public.baseUrl + 'create/artwork/', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${sessionToken}`\n        },\n        body: JSON.stringify({\n            fetchData\n        })\n    })\n\n    return { data: data.value, error: error.value }\n}","<template>\n    <section class=\"artworks-deck flex justify-center items-center\" :userArtworks=\"userArtworks\">\n      <article v-for=\"userArtwork in userArtworks\" :key=\"userArtwork.id\" class=\"user-artwork-card\" >\n        <div class=\"user-artwork-card-title\">\n          <h5>{{ userArtwork.title }}</h5>\n        </div>\n        <div class=\"user-artwork-card-image-container\">\n          <img :src=\"userArtwork.image_url\" :alt=\"userArtwork.title\"/>\n        </div>\n        <div class=\"user-artwork-card-buttons\">\n          <UButton @click=\"artworkRedirect(userArtwork.id)\" variant=\"ghost\" size=\"xl\" icon=\"i-carbon-pending\" color=\"violet\" class=\"button\"></UButton>\n          <!-- <NuxtLink :to=\"'artworks/' + userArtwork.id\" class=\"button\" as=\"button\"></NuxtLink> -->\n          <UButton @click=\"$emit('artworkId', userArtwork.id)\" variant=\"outline\" size=\"xl\" icon=\"i-carbon-trash-can\" color=\"red\" class=\"button\"></UButton>\n        </div>\n      </article>\n\n    <!-- <UModal v-model=\"deleteModal\">\n      <UCard class=\"flex flex-col w-full items-center justify-center\" :ui=\"{ ring: '', divide: 'divide-y divide-gray-100 dark:divide-gray-100'}\">\n        <template #header>\n          <h3 class=\"h-8 text-xl font-bold drop-shadow-lg text-slate-900\">Confirmation</h3>\n        </template>\n\n        <p class=\"h-32 text-slate-800 text-center\">Are you sure to delete Artwork?</p>\n        <button class=\"w-full bg-red-400 text-slate-200 text-center rounded-xl h-12 text-xl font-bold hover:text-slate-900 hover:bg-red-600\" @click=\"deleteArtwork(deleteArtworkId)\">Borrar</button>\n        <template #footer>\n          <small class=\"h-8 text-xl text-red-400\">Delete is not reversible</small>\n        </template>\n      </UCard>\n    </UModal> -->\n    </section>\n</template>\n\n<script setup>\n\ndefineProps({\n  userArtworks : Object,\n})\nconst route = useRoute()\nconst params = route.params\n\nconst toast = useToast();\n\n// const emit = defineEmits(['deleteArtwork', userArtwork.value.id])\n// function emitArtworkid() {\n//   $emit('deleteArtwork', userArtwork.value.id);\n// }\n\n// const deleteModal = ref(false);\n// const deleteArtworkId = ref('');\n\n// const { emit } = defineEmits();\n\n\n// function setDeleteArtworkId(artworkId) {\n//   deleteArtworkId.value = artworkId;\n//   deleteModal.value = true;\n// }\n\n// async function deleteArtwork(artworkId) {\n//   try {\n//     await useFetch(`http://localhost:8000/api/v1/artworks/${artworkId}/`, {\n//       method: 'DELETE'\n//     } )\n//     deleteModal.value = false\n//     toast.add({ title: 'Artwork deleted', timeout: 1500, color:\"red\", callback:window.location.reload()})\n//   } catch (error) {\n//     console.error('Error deleting or creating artwork:', error);\n//   }\n// }\n\nfunction artworkRedirect(artworkId) {\n\n  if (route.path === '/dashboard') {\n    navigateTo('dashboard/' + artworkId)\n  } else {\n    navigateTo('/artworks' + artworkId)\n  }\n\n}\n\n\n</script>\n\n<style>\n\n.artworks-title {\n  font-size: 30px;\n  font-weight: bold;\n  color: #151515af;\n}\n\n.artworks-deck {\n  display: grid;\n  width: 100%;\n  height: 100%;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  grid-auto-rows: auto;\n  align-items: center;\n  place-content: center;\n  gap: 10px;\n  padding: 20px;\n}\n\n.alert {\n  width:100%;\n  background-color: rgba(249, 95, 95, 0.621);\n  font-size: 15px;\n  font-weight: bold;\n  display:flex;\n  justify-content: space-between;\n  padding: 5px 15px;\n  color: #151515af;\n}\n\n.user-artwork-card {\n  height: 100%;\n  border-bottom: 1px solid #b9bbbe;\n\n  .user-artwork-card-title {\n    width: 100%;\n    text-align: center;\n    height: 10%;\n    display:flex;\n    align-items: center;\n    justify-content:center;\n    font-weight: bold;\n    letter-spacing: 2px;\n    color: #151515af\n  }\n\n  .user-artwork-card-image-container {\n    width: 100%;\n    height: 75%;\n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n      object-position: center;\n      border-radius: 10px;\n      box-shadow: 0 0 10px 0 rgb(93, 93, 93);\n      border: 1px solid #5556589d;\n    }\n  }\n\n  .user-artwork-card-buttons {\n    /* width: 100%; */\n    height: 15%;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n  }\n}\n\n</style>","<template>\n  <UContainer class=\"w-6/12 my-8\">\n    <UButton @click=\"handleFormVisibility\" label=\"Click if you want upload an artowork!\" icon=\"i-heroicons-pencil-square\" color=\"black\" block></UButton>\n    <section class=\"form-wrapper mt-8\" v-if=\"!hiddenForm\">\n      <form class=\"artwork-form space-y-4 text-slate-900\" @submit.prevent=\"createArtwork\">\n        <USelect class=\"text-red-400\" color=\"violet\" variant=\"outline\" size=\"xl\" icon=\"i-carbon-fetch-upload-cloud\" v-model=\"type\" placeholder=\"Select if you want to upload a photo or painting\" :padded=\"true\" :options=\"options\" />\n        <section class=\"form-label my-4 flex flex-row gap-8\">\n          <div>\n            <div class=\"form-label\">\n              <label for=\"title\">Title</label>\n              <input v-model=\"artwork.title\" id=\"title\" name=\"title\" type=\"text\" class=\"form-control rounded-full bg-white\">\n            </div>\n  \n            <div class=\"form-label\">\n              <label for=\"description\">Description</label>\n              <input v-model=\"artwork.description\" id=\"description\" name=\"description\" type=\"text\" class=\"form-control rounded-full bg-white\">\n            </div>\n  \n            <div class=\"form-label\">\n              <label for=\"image_url\">Image URL</label>\n              <input v-model=\"artwork.image_url\" id=\"image_url\" name=\"image_url\" type=\"text\" class=\"form-control rounded-full bg-white\">\n            </div>\n  \n            <div class=\"form-label\">\n              <label for=\"price\">Price</label>\n              <input v-model=\"artwork.price\" id=\"price\" name=\"price\" type=\"text\" class=\"form-control rounded-full bg-white\">\n            </div>\n          </div>\n          <div v-if=\"type !== ''\">\n            <div v-if=\"type !== ''\" class=\"form-label\">\n              <label for=\"style\">Style</label>\n              <input v-model=\"artwork.style\" id=\"style\" name=\"style\" type=\"text\" class=\"form-control rounded-full bg-white\">\n            </div>\n  \n            <div v-if=\"type === 'Painting'\" class=\"form-label\">\n              <label for=\"width\">Width</label>\n              <input v-model=\"artwork.width\" id=\"width\" name=\"width\" type=\"text\" class=\"form-control rounded-full bg-white\">\n            </div>\n  \n            <div v-if=\"type === 'Painting'\" class=\"form-label\">\n              <label for=\"height\">Height</label>\n              <input v-model=\"artwork.height\" id=\"height\" name=\"height\" type=\"text\" class=\"form-control rounded-full bg-white\">\n            </div>\n          </div>\n        </section>\n        <button type=\"submit\" :disabled=\"pendingFetch\" class=\"btn\">\n          <span v-if=\"pendingFetch\">Submitting...</span>\n          <span v-else>Submit</span>\n        </button>\n      </form>\n    </section>\n        <p v-if=\"dataFetch\" class=\"text-lg text-center text-lime-500\">Artwork created!</p>\n        <p v-if=\"errorFetch\" class=\"text-lg text-center text-red-600\">Error creating artwork</p>\n  </UContainer>\n    <section class=\"flex flex-row items-center justify-around\">\n      <ArtworkSkeleton v-if =\"userArtworksLoading\"  />\n      <UserArtworksList v-if=\"!userArtworksLoading\" :userArtworks=\"userArtworks\" @artworkId=\"setDeleteArtworkId\" />\n    </section>\n    <UModal v-model=\"deleteModal\">\n      <UCard class=\"flex flex-col w-full items-center justify-center\" :ui=\"{ ring: '', divide: 'divide-y divide-gray-100 dark:divide-gray-100'}\">\n        <template #header>\n          <h3 class=\"h-8 text-xl font-bold drop-shadow-lg text-slate-900\">Confirmation</h3>\n        </template>\n\n        <p class=\"h-32 text-slate-800 text-center\">Are you sure to delete Artwork?</p>\n        <button class=\"w-full bg-red-400 text-slate-200 text-center rounded-xl h-12 text-xl font-bold hover:text-slate-900 hover:bg-red-600\" @click=\"deleteArtwork(deleteArtworkId)\">Borrar</button>\n        <template #footer>\n          <small class=\"h-8 text-xl text-red-400\">Delete is not reversible</small>\n        </template>\n      </UCard>\n    </UModal>\n\n</template>\n\n<script setup>\ndefinePageMeta({\n  middleware: [\"auth\"]\n  // or middleware: 'auth'\n})\nimport { useUserLoggedData } from '@/composables/useUserLoggedData'\nimport { useCreateArtwork } from '@/composables/useCreateArtwork';\nimport { useAuthStore } from '~/store/auth';\nimport UserArtworksList from '~/components/UserArtworksList.vue';\n\nconst authStore = useAuthStore();\nconst toast = useToast();\nconst { userLogged, artistId } = storeToRefs(useAuthStore());\nconst type = ref('Painting')\nconst dataFetch = ref('')\nconst errorFetch = ref('')\nconst pendingFetch = ref(false)\nconst artistDataLoaded = ref(false)\nconst userArtworks = ref({})\nconst userArtworksLoading = ref(false)\nconst hiddenForm = ref(true)\nconst artworkCreated = ref(1)\nconst loadingArtistData = ref(true)\nconst deleteModal = ref(false);\nconst deleteArtworkId = ref('');\nlet artistData = {}\nconst allFetched = ref(false)\nconst test = ref(true)\nconst id = artistId.value\n\n\nconst route = useRoute()\nconsole.log(route.path)\n\nconst options = [{\n    name: 'Painting',\n    value: 'Painting'\n    },\n    {\n    name: 'Photo',\n    value: 'Photo'\n    }\n]\n\nconst artwork = ref({\n    title: '',\n    description: '',\n    image_url: '',\n    price: '',\n    style: '',\n    width: '',\n    height: '',\n})\n\nonBeforeMount(async() => {\n    chargeAllData()\n});\n\nonMounted(async () => {\n    chargeAllData()\n});\n\nfunction handleFormVisibility(){\n    hiddenForm.value = !hiddenForm.value\n}\n\nasync function chargeAllData() {\n  try {\n    loadingArtistData.value = true\n    userArtworksLoading.value = true\n    fetchArtworks(id)\n    loadingArtistData.value = false\n  } catch (error) {\n    console.error('Error fetching user artworks:', error);\n  }\n}\n\nconst createArtwork = async () => {\n    const fetchingData = {\n        ...artwork.value,\n        type: type.value.toLowerCase(),\n        artistId: artistId.value\n    }\n        pendingFetch.value = true\n        const { data, error } = await useCreateArtwork(fetchingData)\n\n        if (error) {\n            errorFetch.value = error\n            pendingFetch.value = false\n\n        } else {\n            errorFetch.value = ''\n            dataFetch.value = data\n            pendingFetch.value = false\n            artoworkCreatedOk()\n        }\n}\n\nfunction artoworkCreatedOk() {\n    toast.add({ title: 'Congratulations! Artwork created!',\n            timeout: 1500})\n    resetForm()\n    dataFetch.value = false\n    errorFetch.value = false\n    hiddenForm.value = true\n    artworkCreated.value += 1\n    useScrollToTop() \n}\n\nwatch(artworkCreated, (newValue, oldValue) => {\n  // Realizar el fetch de datos cuando se crea un nuevo artwork\n  if (newValue > oldValue) {\n    fetchArtworks(id)\n  }\n})\n\nasync function fetchArtworks(idArtist) {\n    const { data, error } = await useFetch(`https://arthub-api-polished-breeze-902.fly.dev/api/v1/search/artworkbyuser/?id=${idArtist}`, {\n        watch: [artworkCreated],\n    })\n    if (data) {\n        userArtworksLoading.value = false\n        userArtworks.value = data.value\n    }\n}\n\nasync function deleteArtwork(artworkId) {\n  try {\n    await useFetch(`https://arthub-api-polished-breeze-902.fly.dev/api/v1/artworks/${artworkId}/`, {\n      method: 'DELETE'\n    } )\n    artworkCreated.value += 1\n    deleteModal.value = false\n    userArtworksLoading.value = true\n    useScrollToTop()\n    toast.add({ title: 'Artwork deleted', timeout: 1500, color:\"red\"})\n\n  } catch (error) {\n    console.error('Error deleting or creating artwork:', error);\n  }\n}\n\nfunction setDeleteArtworkId(artworkId) {\n  console.log('Artwork ID:', artworkId);\n  deleteArtworkId.value = artworkId;\n  deleteModal.value = true;\n}\n\nfunction resetForm() {\n  artwork.value.title= ''\n  artwork.value.description= ''\n  artwork.value.image_url= ''\n  artwork.value.price= ''\n  artwork.value.style= ''\n  artwork.value.width= ''\n  artwork.value.height= ''\n}\n</script>\n\n<style scoped>\n  .container {\n    --uib-size: 45px;\n    --uib-color: black;\n    --uib-speed: 1.75s;\n    position: relative;\n    height: var(--uib-size);\n    width: var(--uib-size);\n    animation: rotate calc(var(--uib-speed) * 4) linear infinite;\n  }\n\n  .artwork-form {\n    display: flex;\n    flex-direction: column;\n    align-items: center; /* Centra horizontalmente los elementos del formulario */\n  }\n\n  .form-label {\n    width: 100%;\n    max-width: 1000px; /* Ancho máximo del formulario */\n  }\n  .form-label label{\n    font-size: 1.5rem;\n    font-family: 'Garute';\n}\n\n.form-label input{\n    font-size: 1.2rem;\n    font-family: 'Afacad';\n    font-weight: 500;\n    color: #818cf8;\n    text-transform: uppercase;\n}\n\n  .form-control {\n    width: 100%;\n    padding: 8px;\n    border: 1px solid #ccc;\n    border-radius: 20px; /* Cantos redondos */\n    margin-bottom: 10px;\n    box-sizing: border-box;\n  }\n\n  .btn {\n    padding: 10px 20px;\n    border: none;\n    border-radius: 20px; /* Cantos redondos */\n    background-color: #232c33;\n    color: #e1e9ec;\n    cursor: pointer;\n  }\n\n  .btn:hover {\n    background-color: #e1e9ec;\n    color: #232c33;\n  }\n\n</style>"],"names":[],"mappings":"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"}