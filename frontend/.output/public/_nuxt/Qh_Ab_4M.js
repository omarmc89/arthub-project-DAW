import D from"./D9GmcPDL.js";import{u as F}from"./WkucPJ3U.js";import{k as B,f as R,n as N,r as l,l as P,g as $,c as u,a,h as e,j as f,i as j,q as I,s as d,v as c,o as i,x as L}from"./C79j48wv.js";import{u as V}from"./C0_R-043.js";import{u as M}from"./Bc04BqWs.js";import{u as W}from"./6iK2AHlT.js";import"./DdJAE_fm.js";const z=async y=>{const{sessionToken:p}=W(),_=B(),{data:v,error:b,pending:k}=await V(_.public.baseUrl+"update/artwork/",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({fetchData:y})},"$WWFnCRghcP");return{data:v.value,error:b.value}},O={class:"flex flex-row"},q={class:"image-container"},E=["src","alt"],H={class:"form-container flex items-center justify-center"},J={class:"form-label"},G=a("label",{for:"title"},"Title",-1),K={class:"form-label"},Q=a("label",{for:"description"},"Description",-1),X={class:"form-label"},Y=a("label",{for:"image_url"},"Image URL",-1),Z={class:"form-label"},ee=a("label",{for:"price"},"Price",-1),te={key:0,class:"form-label"},oe=a("label",{for:"style"},"Style",-1),ae={key:1,class:"form-label"},se=a("label",{for:"width"},"Width",-1),le={key:2,class:"form-label"},ie=a("label",{for:"height"},"Height",-1),re=["disabled"],ne={key:0},ue={key:1},ge={__name:"[id]",async setup(y){let p,_;const v=F(),b=R();N();const k=b.params,x=l(k.id),m=l(!0),h=l(!1),U=l(""),w=l(""),C=l(!1),r=l({style:"",width:"",height:""}),t=l({title:"",description:"",image_url:"",price:"",style:"",width:"",height:""});[p,_]=P(()=>M()),p=await p,_(),$(()=>{T(x.value)});async function T(g){const{data:o,error:n}=await V(`https://arthub-api-polished-breeze-902.fly.dev/api/v1/artworkDetails/?id=${g}`,{},"$ediLfIebN9");o&&(C.value=!0,t.value=o.value.artwork,r.value=o.value.photo?o.value.photo:o.value.painting,m.value=o.value.photo!==void 0,t.value.style=r.value.style,t.value.width=r.value.width,t.value.height=r.value.height),n&&console.log(n)}const A=async()=>{const g={...t.value,type:m.value?"photo":"painting",artworkId:x.value};h.value=!0;const{data:o,error:n}=await z(g);n?(w.value=n,h.value=!1):(w.value="",U.value=o,h.value=!1,S())};function S(){v.add({title:"Congratulations! Artwork updated!",timeout:1500,callback:()=>{setTimeout(()=>{L("/dashboard")},250)}}),U.value="",w.value="",artworkCreated.value+=1}return(g,o)=>{const n=D;return i(),u("section",O,[a("article",q,[e(t).image_url!==""?(i(),u("img",{key:0,src:e(t).image_url,alt:e(t).title},null,8,E)):f("",!0),e(t).image_url===""?(i(),j(n,{key:1,class:"h-[600px] w-[500px] mr-32",ui:{rounded:"rounded-xl"}})):f("",!0)]),a("article",H,[a("form",{class:"artwork-form space-y-4 text-slate-900",onSubmit:I(A,["prevent"])},[a("div",null,[a("div",J,[G,d(a("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>e(t).title=s),id:"title",name:"title",type:"text",class:"form-control rounded-full bg-white"},null,512),[[c,e(t).title]])]),a("div",K,[Q,d(a("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e(t).description=s),id:"description",name:"description",type:"text",class:"form-control rounded-full bg-white"},null,512),[[c,e(t).description]])]),a("div",X,[Y,d(a("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>e(t).image_url=s),id:"image_url",name:"image_url",type:"text",class:"form-control rounded-full bg-white"},null,512),[[c,e(t).image_url]])]),a("div",Z,[ee,d(a("input",{"onUpdate:modelValue":o[3]||(o[3]=s=>e(t).price=s),id:"price",name:"price",type:"text",class:"form-control rounded-full bg-white"},null,512),[[c,e(t).price]])]),e(m)&&e(r)?(i(),u("div",te,[oe,d(a("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>e(t).style=s),id:"style",name:"style",type:"text",class:"form-control rounded-full bg-white"},null,512),[[c,e(t).style]])])):f("",!0),!e(m)&&e(r)?(i(),u("div",ae,[se,d(a("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>e(t).width=s),id:"width",name:"width",type:"text",class:"form-control rounded-full bg-white"},null,512),[[c,e(t).width]])])):f("",!0),!e(m)&&e(r)?(i(),u("div",le,[ie,d(a("input",{"onUpdate:modelValue":o[6]||(o[6]=s=>e(t).height=s),id:"height",name:"height",type:"text",class:"form-control rounded-full bg-white"},null,512),[[c,e(t).height]])])):f("",!0)]),a("button",{type:"submit",disabled:e(h),class:"btn btn-primary"},[e(h)?(i(),u("span",ne,"Submitting...")):(i(),u("span",ue,"Submit"))],8,re)],32)])])}}};export{ge as default};
//# sourceMappingURL=Qh_Ab_4M.js.map
